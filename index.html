<html>
  <head>
    <meta charset="UTF-8" />
    <title>Pose Detection</title>

    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js"></script> -->

    <script src="p5.min.js"></script>
    <script src="p5.dom.min.js"></script>

    <!-- <script
      src="https://unpkg.com/ml5@0.12.2/dist/ml5.min.js"
      type="text/javascript"
    ></script> -->
    <!-- <script
      src="https://unpkg.com/ml5@latest/dist/ml5.min.js"
      type="text/javascript"
    ></script> -->

    <!-- <script>
      // Disable all ml5.js online attempts
      window.ml5 = {
        disableRemoteModels: true,
        modelBaseUrl: "", // Block all external fetches
      };
    </script> -->

    <script>
      class ForcedLocalModel {
        constructor(modelJson) {
          this.modelJson = modelJson;
        }
        async loadModel() {
          return this.modelJson;
        }
      }

      window.ml5 = window.ml5 || {};
      window.ml5.config = {
        disableRemoteModels: true,
        modelBasePath: "models/",
        debug: true, // Shows detailed loading logs
        tfjsBackend: "webgl", // Force WebGL acceleration
      };
      window.ml5.bodyPose = async (options) => {
        const model = new ForcedLocalModel(options.modelJson);
        return { model: await model.loadModel() };
      };
    </script>

    <script src="ml5.min.js"></script>
  </head>

  <body style="margin: 0; padding: 0">
    <script src="sketch.js"></script>
  </body>
</html>
